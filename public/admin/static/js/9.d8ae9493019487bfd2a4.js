webpackJsonp([9],{PuIk:function(e,r,t){"use strict";r.c=function(e){return Object(a.a)({url:"api/admin/permission/adminers",method:"get",params:e})},r.e=function(){return Object(a.a)({url:"api/admin/permission/getAllRole",method:"get"})},r.d=function(e){return Object(a.a)({url:"api/admin/permission/getAdminRoles",method:"get",params:e})},r.a=function(e){return Object(a.a)({url:"api/admin/permission/adminers",method:"post",data:e})},r.b=function(e){return Object(a.a)({url:"api/admin/permission/adminers",method:"delete",data:e})};var a=t("vLgD")},T3m8:function(e,r,t){var a=t("cAWU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("8bSs")("abf1175a",a,!0)},cAWU:function(e,r,t){(e.exports=t("BkJT")(!1)).push([e.i,"\ninput[type=file] {\n     display: none;\n}\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n.avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n}\n.avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n}\n",""])},jYAU:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("PuIk"),s={name:"createUsers",data:function(){return{ruleForm:{id:0,name:"",account:"",password:"",confirmPw:"",email:"",roles:[],avatar:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],account:[{required:!0,message:"请输入帐户名",trigger:"blur"}],email:[{type:"email",message:"请输入正确的电子邮箱",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:17,message:"密码长度在6到17个字符",trigger:"blur"}],confirmPw:[{required:!0,message:"请输入确认密码",trigger:"blur"},{min:6,max:17,message:"密码长度在6到17个字符",trigger:"blur"}],roles:[{required:!0,message:"请选择角色",trigger:"change"}]},isEdit:!1,roles:[],uploadUrl:""}},created:function(){this.$route.params.roles&&(this.roles=this.$route.params.roles);var e=this.$route.params.adminer;e&&(this.isEdit=!0,this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.ruleForm.account=e.account,this.ruleForm.email=e.email,this.ruleForm.avatar="https://shop.test/"+e.avatar,this.getAdminRoles(e.id)),this.uploadUrl="https://shop.test//api/admin/uploadImage"},methods:{beforeAvatarUpload:function(e){var r="image/jpeg"===e.type,t=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&t},handleAvatarSuccess:function(e,r){this.ruleForm.avatar="https://shop.test/"+r.response.path},getAdminRoles:function(e){var r=this;Object(a.d)({id:e}).then(function(e){r.ruleForm.roles=e.data.list}).catch(function(e){console.log(e)})},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.ruleForm.password==r.ruleForm.confirmPw?Object(a.a)(r.ruleForm).then(function(e){r.$message.success("操作成功"),r.$router.push({path:"/permission/users"})}).catch(function(e){r.$message.warning(e.response.data.message)}):r.$message.warning("两次密码输入不一致！")})}}},o={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container",staticStyle:{width:"50%",margin:"20px auto"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"昵称：",prop:"name"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入昵称"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"登陆账户：",prop:"account"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入登陆账户"},model:{value:e.ruleForm.account,callback:function(r){e.$set(e.ruleForm,"account",r)},expression:"ruleForm.account"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"封面图片：",prop:"avatar"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.avatar?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"电子邮箱：",prop:"email"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入电子邮箱"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),e._v(" "),e.isEdit?e._e():t("el-form-item",{attrs:{label:"密码：",prop:"password"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),e._v(" "),e.isEdit?e._e():t("el-form-item",{attrs:{label:"确认密码：",prop:"confirmPw"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.ruleForm.confirmPw,callback:function(r){e.$set(e.ruleForm,"confirmPw",r)},expression:"ruleForm.confirmPw"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色分配：",prop:"roles"}},[t("el-checkbox-group",{attrs:{size:"small"},model:{value:e.ruleForm.roles,callback:function(r){e.$set(e.ruleForm,"roles",r)},expression:"ruleForm.roles"}},e._l(e.roles,function(r){return t("el-checkbox",{key:r.id,attrs:{label:r.id,border:""}},[t("span",{domProps:{textContent:e._s(r.name)}})])}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var l=t("vSla")(s,o,!1,function(e){t("T3m8")},null,null);r.default=l.exports}});