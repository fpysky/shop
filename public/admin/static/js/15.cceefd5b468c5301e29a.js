webpackJsonp([15],{AFYx:function(e,t,r){"use strict";t.b=function(e){return Object(i.a)({url:"api/admin/indexBanners",method:"get",params:e})},t.a=function(e){return Object(i.a)({url:"api/admin/indexBanners",method:"delete",data:e})},t.d=function(e){return Object(i.a)({url:"api/admin/indexBanners",method:"post",data:e})},t.e=function(e){return Object(i.a)({url:"api/admin/indexBanners",method:"put",data:e})},t.c=function(e){return Object(i.a)({url:"api/admin/indexBanners/"+e,method:"get"})};var i=r("vLgD")},iAsX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("AFYx"),n=r("UgCr"),a={name:"indexBannerCreate",data:function(){return{ruleForm:{id:0,product_id:"",image:""},products:[],ruleRules:{product_id:[{required:!0,message:"请选择关联商品",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"blur"}]},submiting:!1,fileList:[],imageDialogVisible:!1,uploadUrl:""}},created:function(){this.getSellProducts(),this.getIndexBanner(),this.uploadUrl="https://shop.test//api/admin/uploadImage"},methods:{getIndexBanner:function(){var e=this,t=this.$route.params.id;t&&Object(i.c)(t).then(function(t){e.ruleForm=t.data.list,e.ruleForm.image="https://shop.test/"+e.ruleForm.image,e.fileList.push({url:e.ruleForm.image})}).catch(function(e){})},handleSuccess:function(e,t,r){this.ruleForm.image="https://shop.test/"+t.response.path},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){this.imageDialogVisible=!0},getSellProducts:function(){var e=this;Object(n.g)().then(function(t){e.products=t.data.list}).catch(function(t){e.$message.error(t.response.data.message)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.submiting=!0,0==t.ruleForm.id?Object(i.d)(t.ruleForm).then(function(e){t.submiting=!1,t.$router.push({path:"/advertisement/indexBanner"})}).catch(function(e){t.error=!0,t.errors=e.response.data.errors,t.submiting=!1}):Object(i.e)(t.ruleForm).then(function(e){t.submiting=!1,t.$router.push({path:"/advertisement/indexBanner"})}).catch(function(e){t.error=!0,t.errors=e.response.data.errors,t.submiting=!1})})}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticStyle:{width:"75%",margin:"0 auto"}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.ruleRules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"选择关联商品：",prop:"product_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择关联商品"},model:{value:e.ruleForm.product_id,callback:function(t){e.$set(e.ruleForm,"product_id",t)},expression:"ruleForm.product_id"}},e._l(e.products,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"上传图片：",prop:"image"}},[r("el-upload",{attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{loading:e.submiting,type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"查看图片",visible:e.imageDialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.imageDialogVisible=t}}},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.ruleForm.image,alt:""}})])],1)])},staticRenderFns:[]},o=r("vSla")(a,s,!1,null,null,null);t.default=o.exports}});